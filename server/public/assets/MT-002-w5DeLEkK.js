import{s as E,a as d}from"./index-DzeG4XAE.js";import{_ as c}from"./CommonModal-DAUXa4tk.js";import{a as m}from"./index-NIGUFBhG.js";import{_ as Q}from"./card-header-btn2-3eeFV3jL.js";import{d as T}from"./dayjs.min-CQa8u9th.js";import{_ as A}from"./SnackBar-HH3n22ps.js";import{u as G}from"./useSnackBar-IN_qynCK.js";import{r as n,M as H,m as J,c as K,o as X,b as l,w as o,Q as Z,T as V,U as r,ac as b,a0 as w,d as _,x as ee,ap as le,s as te,a as ae,u as s,t as oe,N as ne,F as se}from"./index-vUQOwfGq.js";import"./_commonjsHelpers-gnU0ypJ3.js";const de={class:"card"},_e={__name:"MT-002",setup(re){const{snackBar:i}=G(),D=n(),k=n(!1),M=n(!1),I=n(!1),x=n(!1),g=n(!1),v=n(null),C=n(null),p=n(null),f=n(null),y=n(null),S=n(!1),u=n(null),$=H(()=>u.value?T(u.value).format("YYYY-MM-DD"):"");J(()=>{});function L(){confirm("초기화하시겠습니까?")&&(v.value=null,C.value=null,p.value=null,f.value=null,y.value=null,$.value=null)}const Y=async()=>{try{const t={item_id:v.value,lot_id:C.value,item_type:p.value,cutd_cond:f.value,wh_id:y.value,vald_date:$.value,status:"사용가능"},e=await m.get("/api/inventoryList",{params:t});D.value=e.data}catch{i("조회 실패.","error")}},F=async()=>{try{const t={uon:"Y"};return(await m.get("/api/itemList",{params:t})).data}catch{return i("조회 실패.","error"),[]}},U=async()=>{try{return(await m.get("/api/lotId")).data}catch{return i("조회 실패.","error"),[]}},B=async()=>{try{return(await m.get("/api/itemType")).data}catch{return i("조회 실패.","error"),[]}},z=async()=>{try{return(await m.get("/api/cutdCond")).data}catch{return i("조회 실패.","error"),[]}},h=async()=>{try{return(await m.get("/api/whId")).data}catch{return i("조회 실패.","error"),[]}},N=t=>{v.value=t.item_id},O=t=>{C.value=t.lot_id},W=t=>{p.value=t.type},j=t=>{f.value=t.cutd_cond},P=t=>{y.value=t.wh_id},R=t=>t?T(t).format("YYYY-MM-DD"):"";return(t,e)=>(X(),K(se,null,[l(ne,{elevation:"10"},{default:o(()=>[l(Z,{class:"py-6 px-6"},{default:o(()=>[l(Q,{title:"재고조회","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"secondary",onBtnClick1:e[0]||(e[0]=a=>L()),"btn-text2":"조회","btn-variant2":"flat","btn-color2":"primary",onBtnClick2:e[1]||(e[1]=a=>Y())}),l(V,null,{default:o(()=>[l(r,{cols:"12",md:"12"},{default:o(()=>[l(V,{justify:"space-between",dense:""},{default:o(()=>[l(r,{cols:"12",sm:"4"},{default:o(()=>[l(b,{label:"품목 번호",modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value=a),variant:"outlined",readonly:""},{"append-inner":o(()=>[l(w,{onClick:e[2]||(e[2]=a=>k.value=!0),class:"cursor-pointer"},{default:o(()=>e[19]||(e[19]=[_("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"4"},{default:o(()=>[l(b,{label:"품목 구분",modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=a=>p.value=a),variant:"outlined",readonly:""},{"append-inner":o(()=>[l(w,{onClick:e[4]||(e[4]=a=>I.value=!0),class:"cursor-pointer"},{default:o(()=>e[20]||(e[20]=[_("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"4"},{default:o(()=>[l(b,{label:"보관 조건",modelValue:f.value,"onUpdate:modelValue":e[7]||(e[7]=a=>f.value=a),variant:"outlined",readonly:""},{"append-inner":o(()=>[l(w,{onClick:e[6]||(e[6]=a=>x.value=!0),class:"cursor-pointer"},{default:o(()=>e[21]||(e[21]=[_("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(V,{dense:""},{default:o(()=>[l(r,{cols:"12",sm:"4"},{default:o(()=>[l(b,{label:"창고 코드",modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=a=>y.value=a),variant:"outlined",readonly:""},{"append-inner":o(()=>[l(w,{onClick:e[8]||(e[8]=a=>g.value=!0),class:"cursor-pointer"},{default:o(()=>e[22]||(e[22]=[_("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"4"},{default:o(()=>[l(ee,{modelValue:S.value,"onUpdate:modelValue":e[13]||(e[13]=a=>S.value=a),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:o(({props:a})=>[l(b,te(a,{modelValue:u.value,"onUpdate:modelValue":e[10]||(e[10]=q=>u.value=q),label:"유효기간","append-inner-icon":"mdi-calendar",readonly:"",variant:"outlined","model-value":$.value}),null,16,["modelValue","model-value"])]),default:o(()=>[l(le,{modelValue:u.value,"onUpdate:modelValue":[e[11]||(e[11]=a=>u.value=a),e[12]||(e[12]=a=>S.value=!1)]},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(V,null,{default:o(()=>[l(r,{cols:"12"},{default:o(()=>[ae("div",de,[l(s(E),{value:D.value,paginator:"",rows:10,tableStyle:"min-width: 50rem"},{default:o(()=>[l(s(d),{field:"lot_id",sortable:"",header:"LOT번호",style:{width:"130px"}}),l(s(d),{field:"item_id",sortable:"",header:"품목번호",style:{width:"130px"}}),l(s(d),{field:"item_name",header:"품목명",style:{width:"130px"}}),l(s(d),{field:"item_type",header:"품목구분",style:{width:"80px"}}),l(s(d),{field:"wh_name",header:"위치",style:{width:"100px"}}),l(s(d),{field:"cutd_cond",header:"보관조건",style:{width:"80px"}}),l(s(d),{field:"qty",header:"수량",style:{width:"80px"}}),l(s(d),{field:"vald_date",sortable:"",header:"유효기한",style:{width:"100px"}},{body:o(({data:a})=>[_(oe(R(a.vald_date)),1)]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1})]),_:1})]),_:1}),l(c,{visible:k.value,title:"품목 검색",idField:"item_id",columns:[{key:"item_id",label:"품목번호"},{key:"item_name",label:"품목명"},{key:"item_type",label:"품목구분"}],fetchData:F,pageSize:5,onSelect:N,onClose:e[14]||(e[14]=a=>k.value=!1)},null,8,["visible"]),l(c,{visible:M.value,title:"LOT 검색",idField:"lot_id",columns:[{key:"lot_id",label:"LOT번호"},{key:"item_id",label:"품목번호"},{key:"wh_id",label:"창고번호"}],fetchData:U,pageSize:5,onSelect:O,onClose:e[15]||(e[15]=a=>M.value=!1)},null,8,["visible"]),l(c,{visible:I.value,title:"품목구분 검색",idField:"order_id",columns:[{key:"order_id",label:"주문번호"},{key:"vend_id",label:"거래처번호"},{key:"ordr",label:"주문명"}],fetchData:B,pageSize:5,onSelect:W,onClose:e[16]||(e[16]=a=>I.value=!1)},null,8,["visible"]),l(c,{visible:x.value,title:"주문 검색",idField:"order_id",columns:[{key:"order_id",label:"주문번호"},{key:"vend_id",label:"거래처번호"},{key:"ordr",label:"주문명"}],fetchData:z,pageSize:5,onSelect:j,onClose:e[17]||(e[17]=a=>x.value=!1)},null,8,["visible"]),l(c,{visible:g.value,title:"창고번호 검색",idField:"wh_id",columns:[{key:"wh_id",label:"창고번호"},{key:"wh_name",label:"창고이름"},{key:"wh_type",label:"창고유형"},{key:"loca",label:"소재지"}],fetchData:h,pageSize:5,onSelect:P,onClose:e[18]||(e[18]=a=>g.value=!1)},null,8,["visible"]),l(A)],64))}};export{_e as default};
