import{_ as ae}from"./card-header-BG8Zbe1P.js";import{_ as ne}from"./card-header-btn2-3eeFV3jL.js";import{_ as ue}from"./card-header-btn3k-6zMLpEnU.js";import{s as oe,a as v}from"./index-DzeG4XAE.js";import{_ as g}from"./CommonModal-DAUXa4tk.js";import{a as y}from"./index-NIGUFBhG.js";import{_ as se}from"./SnackBar-HH3n22ps.js";import{u as ie}from"./useSnackBar-IN_qynCK.js";import{r as u,m as de,D as me,c as re,o as ve,b as l,w as t,Q as L,T as s,U as o,ac as p,a0 as C,d as w,aq as A,ar as D,N as q,a as pe,u as i,al as fe,F as ce}from"./index-vUQOwfGq.js";const ye={class:"card"},Ue={__name:"MT-001",setup(be){const{snackBar:d}=ie(),N=u(null),b=u(null),_=u(null),m=u(null),r=u(null),f=u(null),V=u(null),x=u(null),K=u(null),k=u(null),Q=u(),F=u(!1),M=u(!1),j=u(!1),z=u(!1),R=u(!1),Y=u(!1),B=u(null),S=u(null),$=u(null),U=u(null),c=u(null);de(()=>{I()});function H(){S.value=null,$.value=null,U.value=null,B.value=null}function T(){N.value=null,b.value=null,_.value=null,m.value=null,c.value=null,r.value=null,f.value=null,V.value=null,x.value=null,K.value=null,k.value=null}me(N,n=>{n?(b.value=n.item_id,_.value=n.item_name,m.value=n.item_type,c.value=n.unit,r.value=n.spec,f.value=n.cutd_cond,V.value=n.uon,x.value=n.remk,k.value=n.exp_date):(b.value=null,T())});const J=async()=>{confirm("삭제하시겠습니까?")&&(await y.delete("/api/itemDelete",{data:{item_id:b.value}}).catch(e=>console.log(e))).data.result&&(d("삭제되었습니다.","success"),I(),T())},O=async()=>{if(!_.value||!m.value||!r.value||!k.value||!c.value||!f.value||!V.value){d("모든 필수 항목을 입력해주세요.","warning");return}if(confirm("저장하시겠습니까?"))if(b.value){let n={item_name:_.value,item_type:m.value,unit:c.value,spec:r.value,cutd_cond:f.value,uon:V.value,remk:x.value,item_id:b.value,conv_qty:K.value,exp_date:k.value};(await y.put("/api/itemUpdate",n).catch(a=>console.log(a))).data.result&&(d("수정되었습니다","sueccss"),I(),T())}else{let n={item_name:_.value,item_type:m.value,unit:c.value,spec:r.value,cutd_cond:f.value,uon:V.value,remk:x.value,exp_date:k.value,conv_qty:m.value==="원재료"?r.value?Number(r.value.replace(/[^0-9]/g,"")):0:1};(await y.post("/api/itemInsert",n).catch(a=>console.log(a))).data.result&&(d("등록되었습니다","sueccss"),I(),T())}},I=async()=>{try{const n={item_name:S.value,item_type:$.value,cutd_cond:U.value,uon:B.value},e=await y.get("/api/itemList",{params:n});Q.value=e.data}catch{d("조회 실패","error")}},P=async()=>{try{const n={uon:"Y"};return(await y.get("/api/itemList",{params:n})).data}catch{return d("조회 실패","error"),[]}},E=async()=>{try{return(await y.get("/api/itemType")).data}catch{return d("조회 실패","error"),[]}},G=async()=>{try{return(await y.get("/api/cutdCond")).data}catch{return d("조회 실패","error"),[]}},W=async()=>{try{return(await y.get("/api/itemUnit")).data}catch{return d("조회 실패","error"),[]}},X=n=>{S.value=n.item_name},Z=n=>{$.value=n.cmmn_name},h=n=>{U.value=n.cmmn_name},ee=n=>{m.value=n.cmmn_name},le=n=>{f.value=n.cmmn_name},te=n=>{c.value=n.cmmn_name};return(n,e)=>(ve(),re(ce,null,[l(q,{elevation:"10"},{default:t(()=>[l(L,{class:"py-6 px-6"},{default:t(()=>[l(ne,{title:"품목조회","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"secondary",onBtnClick1:e[0]||(e[0]=a=>H()),"btn-text2":"조회","btn-variant2":"flat","btn-color2":"primary",onBtnClick2:e[1]||(e[1]=a=>I())}),l(s,null,{default:t(()=>[l(o,{cols:"12",md:"12"},{default:t(()=>[l(s,{justify:"space-between",dense:""},{default:t(()=>[l(o,{cols:"12",sm:"3"},{default:t(()=>[l(p,{label:"품목명",modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=a=>S.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[l(C,{onClick:e[2]||(e[2]=a=>F.value=!0),class:"cursor-pointer"},{default:t(()=>e[30]||(e[30]=[w("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"3"},{default:t(()=>[l(p,{label:"품목구분",modelValue:$.value,"onUpdate:modelValue":e[5]||(e[5]=a=>$.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[l(C,{onClick:e[4]||(e[4]=a=>M.value=!0),class:"cursor-pointer"},{default:t(()=>e[31]||(e[31]=[w("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"3"},{default:t(()=>[l(p,{label:"보관조건",modelValue:U.value,"onUpdate:modelValue":e[7]||(e[7]=a=>U.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[l(C,{onClick:e[6]||(e[6]=a=>j.value=!0),class:"cursor-pointer"},{default:t(()=>e[32]||(e[32]=[w("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"3"},{default:t(()=>[l(A,{modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=a=>B.value=a),label:"사용여부",class:"mt-0 radio-row"},{default:t(()=>[l(s,{justify:"space-between",class:"px-4"},{default:t(()=>[l(D,{label:"사용",value:"Y"}),l(D,{label:"미사용",value:"N"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(q,{elevation:"10",class:"mt-3"},{default:t(()=>[l(L,{class:"py-6 px-6"},{default:t(()=>[l(ae,{title:"품목목록"}),l(s,null,{default:t(()=>[l(o,{cols:"12",md:"12"},{default:t(()=>[l(s,null,{default:t(()=>[l(o,{cols:"12"},{default:t(()=>[pe("div",ye,[l(i(oe),{selection:N.value,"onUpdate:selection":e[9]||(e[9]=a=>N.value=a),value:Q.value,selectionMode:"single",metaKeySelection:!1,dataKey:"item_id",paginator:"",rows:5,tableStyle:"min-width: 50rem",class:"cursor-pointer"},{default:t(()=>[l(i(v),{field:"item_id",sortable:"",header:"품목번호",style:{width:"200px"}}),l(i(v),{field:"item_name",header:"품목명",style:{width:"200px"}}),l(i(v),{field:"item_type",header:"품목구분",style:{width:"150px"}}),l(i(v),{field:"cutd_cond",header:"보관조건",style:{width:"150px"}}),l(i(v),{field:"spec",header:"규격",style:{width:"130px"}}),l(i(v),{field:"unit",header:"단위",style:{width:"100px"}}),l(i(v),{field:"exp_date",header:"유효기한 일자",style:{width:"125px","text-align":"right"}}),l(i(v),{field:"uon",header:"사용여부",style:{width:"120px"}}),l(i(v),{field:"remk",header:"비고"})]),_:1},8,["selection","value"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(q,{elevation:"10",class:"mt-3"},{default:t(()=>[l(L,{class:"py-6 px-6"},{default:t(()=>[l(ue,{title:"품목관리","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"secondary",onBtnClick1:e[10]||(e[10]=a=>T()),"btn-text2":"삭제","btn-variant2":"flat","btn-color2":"error","btn-disabled2":!b.value,onBtnClick2:e[11]||(e[11]=a=>J()),"btn-text3":"저장","btn-variant3":"flat","btn-color3":"warning",onBtnClick3:e[12]||(e[12]=a=>O())},null,8,["btn-disabled2"]),l(s,null,{default:t(()=>[l(o,{cols:"12",md:"8"},{default:t(()=>[l(s,{justify:"space-between",dense:""},{default:t(()=>[l(o,{cols:"12",sm:"4"},{default:t(()=>[l(p,{label:"품목명",modelValue:_.value,"onUpdate:modelValue":e[13]||(e[13]=a=>_.value=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"4"},{default:t(()=>[l(p,{label:"품목구분",modelValue:m.value,"onUpdate:modelValue":e[15]||(e[15]=a=>m.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[l(C,{onClick:e[14]||(e[14]=a=>z.value=!0),class:"cursor-pointer"},{default:t(()=>e[33]||(e[33]=[w("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"4"},{default:t(()=>[l(p,{label:"규격",modelValue:r.value,"onUpdate:modelValue":e[16]||(e[16]=a=>r.value=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{justify:"space-between",dense:""},{default:t(()=>[l(o,{cols:"12",sm:"3"},{default:t(()=>[l(p,{label:"단위",modelValue:c.value,"onUpdate:modelValue":e[18]||(e[18]=a=>c.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[l(C,{onClick:e[17]||(e[17]=a=>Y.value=!0),class:"cursor-pointer"},{default:t(()=>e[34]||(e[34]=[w("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"3"},{default:t(()=>[l(p,{label:"유효기간 일자",modelValue:k.value,"onUpdate:modelValue":e[19]||(e[19]=a=>k.value=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"3"},{default:t(()=>[l(p,{label:"보관조건",modelValue:f.value,"onUpdate:modelValue":e[21]||(e[21]=a=>f.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[l(C,{onClick:e[20]||(e[20]=a=>R.value=!0),class:"cursor-pointer"},{default:t(()=>e[35]||(e[35]=[w("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,{cols:"12",sm:"3"},{default:t(()=>[l(A,{modelValue:V.value,"onUpdate:modelValue":e[22]||(e[22]=a=>V.value=a),label:"사용여부",class:"mt-0 radio-row"},{default:t(()=>[l(s,{justify:"space-between",class:"px-4"},{default:t(()=>[l(D,{label:"사용",value:"Y"}),l(D,{label:"미사용",value:"N"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(o,{cols:"12",md:"4"},{default:t(()=>[l(s,null,{default:t(()=>[l(o,{cols:"12"},{default:t(()=>[l(fe,{label:"비고",modelValue:x.value,"onUpdate:modelValue":e[23]||(e[23]=a=>x.value=a),outlined:"",rows:"5"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{visible:F.value,title:"품목명",idField:"item_id",columns:[{key:"item_id",label:"품목번호"},{key:"item_name",label:"품목명"},{key:"item_type",label:"품목구분"}],fetchData:P,pageSize:5,onSelect:X,onClose:e[24]||(e[24]=a=>F.value=!1)},null,8,["visible"]),l(g,{visible:M.value,title:"품목유형",idField:"cmmn_id",columns:[{key:"cmmn_id",label:"공통코드 번호"},{key:"cmmn_name",label:"공통코드명"}],fetchData:E,pageSize:5,onSelect:Z,onClose:e[25]||(e[25]=a=>M.value=!1)},null,8,["visible"]),l(g,{visible:j.value,title:"보관유형",idField:"cmmn_id",columns:[{key:"cmmn_id",label:"공통코드 번호"},{key:"cmmn_name",label:"공통코드명"}],fetchData:G,pageSize:5,onSelect:h,onClose:e[26]||(e[26]=a=>j.value=!1)},null,8,["visible"]),l(g,{visible:z.value,title:"품목유형",idField:"cmmn_id",columns:[{key:"cmmn_id",label:"공통코드 번호"},{key:"cmmn_name",label:"공통코드명"}],fetchData:E,pageSize:5,onSelect:ee,onClose:e[27]||(e[27]=a=>z.value=!1)},null,8,["visible"]),l(g,{visible:R.value,title:"보관유형",idField:"cmmn_id",columns:[{key:"cmmn_id",label:"공통코드 번호"},{key:"cmmn_name",label:"공통코드명"}],fetchData:G,pageSize:5,onSelect:le,onClose:e[28]||(e[28]=a=>R.value=!1)},null,8,["visible"]),l(g,{visible:Y.value,title:"단위",idField:"cmmn_id",columns:[{key:"cmmn_id",label:"공통코드 번호"},{key:"cmmn_name",label:"공통코드명"}],fetchData:W,pageSize:5,onSelect:te,onClose:e[29]||(e[29]=a=>Y.value=!1)},null,8,["visible"]),l(se)],64))}};export{Ue as default};
