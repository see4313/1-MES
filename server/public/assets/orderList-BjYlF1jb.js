import{s as k,a as o}from"./index-DzeG4XAE.js";import{_ as F}from"./CommonModal-DAUXa4tk.js";import{a as c}from"./index-NIGUFBhG.js";import{_ as N}from"./card-header-btn-CibSipEU.js";import{d as g}from"./dayjs.min-CQa8u9th.js";import{_ as U}from"./SnackBar-HH3n22ps.js";import{u as L}from"./useSnackBar-IN_qynCK.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as K,r as d,M as O,c as T,o as j,b as e,w as l,N as x,Q as P,T as M,U as C,p as S,ac as D,a0 as q,d as i,x as z,ap as E,s as Q,u as r,t as v,a as A,O as G,F as H}from"./index-vUQOwfGq.js";import"./_commonjsHelpers-gnU0ypJ3.js";const J={class:"d-sm-flex align-center justify-space-between"},W={__name:"orderList",setup(X){K(()=>{});const{snackBar:u}=L(),_=d(null),y=d(),V=d(),m=d(!1),f=d(null),b=d(null);d(null);const p=d(!1),n=d(null),w=O(()=>n.value?g(n.value).format("YYYY-MM-DD"):""),I=async()=>{try{const s={emp_id:b.value,ordr_date:w.value},a=await c.get("/api/orderList",{params:s});y.value=a.data}catch{u("조회 실패.","error")}},Y=async s=>{try{const a=await c.get("/api/detailOrder",{params:{order_id:s.data.order_id}});V.value=a.data}catch{return u("조회 실패.","error"),[]}},$=async()=>{try{return(await c.get("/api/empModal")).data}catch{return u("조회 실패.","error"),[]}},h=s=>{f.value=s.emp_name,b.value=s.emp_id};return(s,a)=>(j(),T(H,null,[e(M,null,{default:l(()=>[e(x,{elevation:"10"},{default:l(()=>[e(P,{class:"py-6 px-6"},{default:l(()=>[e(N,{title:"주문 조회","btn-text":"조회","btn-variant":"flat","btn-color":"primary",onBtnClick:a[0]||(a[0]=t=>I())})]),_:1}),e(M,{"no-gutters":""},{default:l(()=>[e(C,{cols:"12",sm:"4"},{default:l(()=>[e(S,{class:"pa-2 ma-2"},{default:l(()=>[e(D,{variant:"outlined",label:"담당자 검색",modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=t=>f.value=t),readonly:""},{"append-inner":l(()=>[e(q,{onClick:a[1]||(a[1]=t=>m.value=!0),class:"cursor-pointer"},{default:l(()=>a[9]||(a[9]=[i("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(C,{cols:"12",sm:"4"},{default:l(()=>[e(S,{class:"pa-2 ma-2"},{default:l(()=>[e(z,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=t=>p.value=t),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:l(({props:t})=>[e(D,Q(t,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=B=>n.value=B),label:"주문일자","append-inner-icon":"mdi-calendar",readonly:"",variant:"outlined","model-value":w.value}),null,16,["modelValue","model-value"])]),default:l(()=>[e(E,{modelValue:n.value,"onUpdate:modelValue":[a[4]||(a[4]=t=>n.value=t),a[5]||(a[5]=t=>p.value=!1)]},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r(k),{selection:_.value,"onUpdate:selection":a[7]||(a[7]=t=>_.value=t),value:y.value,tableStyle:"min-width: 50rem",onRowClick:Y,class:"cursor-pointer",selectionMode:"single",metaKeySelection:!1,dataKey:"order_id",paginator:"",rows:5},{default:l(()=>[e(r(o),{field:"order_id",header:"주문코드"}),e(r(o),{field:"ordr",header:"주문명"}),e(r(o),{field:"ordr_date",header:"주문일자"},{body:l(({data:t})=>[i(v(r(g)(t.ordr_date).format("YYYY-MM-DD")),1)]),_:1}),e(r(o),{field:"emp_name",header:"담당자"}),e(r(o),{field:"vend_name",header:"업체명"}),e(r(o),{field:"st",header:"상태"}),e(r(o),{field:"remk",header:"비고"})]),_:1},8,["selection","value"])]),_:1}),e(x,{elevation:"10",class:"mt-10"},{default:l(()=>[A("div",J,[e(G,{class:"text-h5 mb-0"},{default:l(()=>a[10]||(a[10]=[i("상세 주문조회")])),_:1})]),e(r(k),{value:V.value,tableStyle:"min-width: 50rem",paginator:"",rows:5},{default:l(()=>[e(r(o),{field:"detail_id",header:"주문상세코드"}),e(r(o),{field:"order_id",header:"주문코드"}),e(r(o),{field:"item_id",header:"제품코드"}),e(r(o),{field:"qty",header:"수량"}),e(r(o),{field:"spec",header:"규격"}),e(r(o),{field:"unit",header:"단위"}),e(r(o),{field:"amt",header:"금액(원)"},{body:l(({data:t})=>[i(v(new Intl.NumberFormat("ko-KR").format(t.amt)+"원"),1)]),_:1}),e(r(o),{field:"tamt",header:"총금액(원)"},{body:l(({data:t})=>[i(v(new Intl.NumberFormat("ko-KR").format(t.amt)+"원"),1)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(F,{visible:m.value,title:"담당자 검색",idField:"emp_id",columns:[{key:"emp_id",label:"사원번호"},{key:"emp_name",label:"사원명"},{key:"dept_id",label:"부서"}],fetchData:$,pageSize:5,onSelect:h,onClose:a[8]||(a[8]=t=>m.value=!1)},null,8,["visible"]),e(U)],64))}},ie=R(W,[["__scopeId","data-v-e9620c55"]]);export{ie as default};
