import{s as h,a as n}from"./index-DzeG4XAE.js";import{_ as C}from"./CommonModal-DAUXa4tk.js";import{a as V}from"./index-NIGUFBhG.js";import{_ as B}from"./card-header-btn2-3eeFV3jL.js";import{d as x}from"./dayjs.min-CQa8u9th.js";import{_ as I}from"./SnackBar-HH3n22ps.js";import{u as N}from"./useSnackBar-IN_qynCK.js";import{r as i,M as S,c as T,o as U,b as e,w as a,Q as F,T as v,U as u,ac as b,a0 as L,d as w,x as P,ap as R,s as j,a as q,u as o,t as z,N as E,F as O}from"./index-vUQOwfGq.js";import"./_commonjsHelpers-gnU0ypJ3.js";const Q={class:"card"},ae={__name:"MT-008",setup(A){const{snackBar:c}=N(),m=i(!1),d=i(null),r=i(null),p=i(!1),f=i(null),y=i(null),k=()=>{f.value=null,d.value=null,r.value=null},D=async()=>{try{const s={uon:"Y"};return(await V.get("/api/itemList",{params:s})).data}catch{return c("조회 실패.","error"),[]}},M=s=>{d.value=s.item_name,f.value=s.item_id},_=S(()=>r.value?x(r.value).format("YYYY-MM-DD"):""),Y=s=>s?x(s).format("YYYY-MM-DD"):"",$=async()=>{try{const s={item_id:f.value,use_date:_.value},t=await V.get("/api/historyList",{params:s});y.value=t.data}catch{c("조회 실패.","error")}};return(s,t)=>(U(),T(O,null,[e(E,{elevation:"10"},{default:a(()=>[e(F,{class:"py-6 px-6"},{default:a(()=>[e(B,{title:"출고이력","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"secondary",onBtnClick1:t[0]||(t[0]=l=>k()),"btn-text2":"조회","btn-variant2":"flat","btn-color2":"primary",onBtnClick2:t[1]||(t[1]=l=>$())}),e(v,null,{default:a(()=>[e(u,{cols:"12",md:"10"},{default:a(()=>[e(v,{dense:""},{default:a(()=>[e(u,{cols:"12",sm:"4"},{default:a(()=>[e(b,{label:"품목",modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=l=>d.value=l),variant:"outlined",readonly:""},{"append-inner":a(()=>[e(L,{onClick:t[2]||(t[2]=l=>m.value=!0),class:"cursor-pointer"},{default:a(()=>t[9]||(t[9]=[w("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(P,{modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=l=>p.value=l),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:a(({props:l})=>[e(b,j(l,{modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=g=>r.value=g),label:"일자","append-inner-icon":"mdi-calendar",readonly:"",variant:"outlined","model-value":_.value}),null,16,["modelValue","model-value"])]),default:a(()=>[e(R,{modelValue:r.value,"onUpdate:modelValue":[t[5]||(t[5]=l=>r.value=l),t[6]||(t[6]=l=>p.value=!1)]},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(v,null,{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[q("div",Q,[e(o(h),{value:y.value,paginator:"",rows:10,tableStyle:"min-width: 50rem"},{default:a(()=>[e(o(n),{field:"history_id",sortable:"",header:"이력번호",style:{width:"110px"}}),e(o(n),{field:"rsrt_id",header:"실적번호",style:{width:"110px"}}),e(o(n),{field:"lot_id",header:"LOT번호",style:{width:"130px"}}),e(o(n),{field:"item_name",header:"품목명",style:{width:"160px"}}),e(o(n),{field:"item_type",header:"품목구분",style:{width:"100px"}}),e(o(n),{field:"use_qty",header:"출고수량",style:{width:"80px"}}),e(o(n),{field:"use_date",header:"출고일자",style:{width:"80px"}},{body:a(({data:l})=>[w(z(Y(l.use_date)),1)]),_:1}),e(o(n),{field:"remk",header:"비고",style:{width:"100px"}})]),_:1},8,["value"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(C,{visible:m.value,title:"품목 검색",idField:"item_id",columns:[{key:"item_id",label:"품목번호"},{key:"item_name",label:"품목명"},{key:"item_type",label:"품목구분"}],fetchData:D,pageSize:5,onSelect:M,onClose:t[8]||(t[8]=l=>m.value=!1)},null,8,["visible"]),e(I)],64))}};export{ae as default};
