import{a as w}from"./index-NIGUFBhG.js";import{s as _,a as i}from"./index-DzeG4XAE.js";import{d as J}from"./dayjs.min-CQa8u9th.js";import{r as n,M as W,m as X,c as Z,o as h,a as r,b as e,w as t,O as E,d,a9 as O,Q as R,ai as T,K as ll,T as I,U as g,ac as D,V as f,N as B,u as s,t as el,a0 as P,a2 as j,aq as al,ar as q,a6 as tl,af as F,F as ol}from"./index-vUQOwfGq.js";import"./_commonjsHelpers-gnU0ypJ3.js";const ul={style:{"max-height":"520px",overflow:"auto",padding:"0 24px 24px"}},nl={style:{display:"flex","justify-content":"flex-end","margin-top":"12px",gap:"8px"}},dl={class:"mt-4"},pl={__name:"badn",setup(sl){const S=n(!0),p=n([]),y=n([]),M=n(!1),H=n(""),v=n(!1),A=n(""),N=n(""),U=n("all"),b=n(!1),m=n({BADN_NAME:"",BADN_RESN:"",INSP_MTHD:"",UON:""}),V=n(!1),x=n(""),$=W(()=>{const o=(x.value||"").toString().trim().toLowerCase();return o?p.value.filter(l=>[l.BADN_NAME,l.BADN_RESN,l.BADN_CODE,l.INSP_MTHD,l.UON].some(a=>(a||"").toString().toLowerCase().includes(o))):p.value});function G(){x.value="",V.value=!0}function Y(o){A.value=(o==null?void 0:o.BADN_NAME)||"",N.value=(o==null?void 0:o.BADN_CODE)||"",V.value=!1}function z(){const o=N.value,l=U.value;y.value=p.value.filter(a=>{const u=a.BADN_CODE==o,C=l=="all"||a.INSP_MTHD===l;return u&&C})}function L(){A.value="",N.value="",U.value="all",y.value=[...p.value]}async function k(){var o,l,a;M.value=!0;try{const u=await w.get("/api/badncode"),C=Array.isArray(u.data)?u.data:[];p.value=C,y.value=[...C]}catch(u){console.error("[BADN 조회 실패]",((o=u==null?void 0:u.response)==null?void 0:o.data)||(u==null?void 0:u.message)),H.value=((a=(l=u==null?void 0:u.response)==null?void 0:l.data)==null?void 0:a.message)||(u==null?void 0:u.message)||"조회 실패"}finally{M.value=!1}}function c(){v.value=!0}function K(){v.value=!0}async function Q(){var o,l;if(!b.value){alert("필수 항목을 입력하세요.");return}try{await w.post("/api/badncode",m.value),v.value=!1,m.value={BADN_NAME:"",BADN_RESN:"",INSP_MTHD:"",UON:""},await k()}catch(a){console.error("[BADN 저장 실패]",a),alert("저장 실패: "+(((l=(o=a.response)==null?void 0:o.data)==null?void 0:l.message)||a.message))}}return X(k),(o,l)=>(h(),Z(ol,null,[l[30]||(l[30]=r("h1",null,"불량항목 관리",-1)),e(B,{elevation:"10",class:"mb-6"},{default:t(()=>[e(E,{class:"px-6 pt-6"},{default:t(()=>l[13]||(l[13]=[d("불량검색 조건")])),_:1}),e(O),e(R,{class:"py-6 px-6"},{default:t(()=>[e(T,{modelValue:S.value,"onUpdate:modelValue":l[2]||(l[2]=a=>S.value=a)},{default:t(()=>[e(ll,null,{default:t(()=>[e(I,null,{default:t(()=>[e(g,{cols:"12",md:"5"},{default:t(()=>[l[14]||(l[14]=r("h3",null,"불량명",-1)),e(D,{modelValue:A.value,"onUpdate:modelValue":l[0]||(l[0]=a=>A.value=a),readonly:"",placeholder:"불량명을 선택하세요","append-inner-icon":"mdi-magnify",onClick:G},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",md:"5"},{default:t(()=>[l[15]||(l[15]=r("h3",null,"불량코드",-1)),e(D,{modelValue:N.value,"onUpdate:modelValue":l[1]||(l[1]=a=>N.value=a),readonly:"",placeholder:"자동입력"},null,8,["modelValue"])]),_:1})]),_:1}),e(I,{class:"mt-4"},{default:t(()=>[e(g,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[e(f,{color:"primary",variant:"flat",onClick:z},{default:t(()=>l[16]||(l[16]=[d("조회")])),_:1}),e(f,{color:"secondary",variant:"flat",class:"ml-2",onClick:L},{default:t(()=>l[17]||(l[17]=[d("초기화")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(B,{elevation:"10"},{default:t(()=>[e(E,{class:"px-6 pt-6"},{default:t(()=>l[18]||(l[18]=[d("불량항목")])),_:1}),e(O),e(R,{class:"px-0 pb-0"},{default:t(()=>[r("div",ul,[e(s(_),{value:y.value,tableStyle:"font-size:0.85rem;"},{default:t(()=>[e(s(i),{field:"BADN_CODE",header:"불량코드"}),e(s(i),{field:"BADN_NAME",header:"불량명"}),e(s(i),{field:"BADN_RESN",header:"불량사유"}),e(s(i),{field:"REGIST_DE",header:"등록일시"},{body:t(({data:a})=>[d(el(a.REGIST_DE?s(J)(a.REGIST_DE).format("YYYY-MM-DD"):""),1)]),_:1}),e(s(i),{field:"UON",header:"사용여부"})]),_:1},8,["value"]),r("div",nl,[e(f,{color:"primary",variant:"flat",onClick:c},{default:t(()=>l[19]||(l[19]=[d("등록")])),_:1}),e(f,{color:"primary",variant:"flat",onClick:K},{default:t(()=>l[20]||(l[20]=[d("수정")])),_:1})])])]),_:1})]),_:1}),e(F,{modelValue:v.value,"onUpdate:modelValue":l[9]||(l[9]=a=>v.value=a),"max-width":"600"},{default:t(()=>[e(B,null,{default:t(()=>[e(E,{class:"d-flex justify-space-between align-center"},{default:t(()=>[l[22]||(l[22]=r("span",{class:"text-h6"},"불량등록",-1)),e(f,{icon:"",onClick:l[3]||(l[3]=a=>v.value=!1)},{default:t(()=>[e(P,null,{default:t(()=>l[21]||(l[21]=[d("mdi-close")])),_:1})]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(T,{modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=a=>b.value=a)},{default:t(()=>[e(D,{modelValue:m.value.BADN_NAME,"onUpdate:modelValue":l[4]||(l[4]=a=>m.value.BADN_NAME=a),label:"불량명",variant:"outlined",clearable:"",required:""},null,8,["modelValue"]),e(D,{modelValue:m.value.BADN_RESN,"onUpdate:modelValue":l[5]||(l[5]=a=>m.value.BADN_RESN=a),label:"불량사유",variant:"outlined",clearable:"",required:""},null,8,["modelValue"]),l[24]||(l[24]=r("div",{class:"mt-4"},null,-1)),r("div",dl,[l[23]||(l[23]=r("span",{class:"font-weight-medium"},"사용여부",-1)),e(al,{modelValue:m.value.UON,"onUpdate:modelValue":l[6]||(l[6]=a=>m.value.UON=a),inline:""},{default:t(()=>[e(q,{label:"사용",value:"사용"}),e(q,{label:"미사용",value:"미사용"})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])]),_:1}),e(tl,{class:"justify-end"},{default:t(()=>[e(f,{text:"",onClick:l[8]||(l[8]=a=>v.value=!1)},{default:t(()=>l[25]||(l[25]=[d("취소")])),_:1}),e(f,{color:"primary",onClick:Q},{default:t(()=>l[26]||(l[26]=[d("저장")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(F,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=a=>V.value=a),"max-width":"900"},{default:t(()=>[e(B,null,{default:t(()=>[e(E,{class:"d-flex justify-space-between align-center"},{default:t(()=>[l[28]||(l[28]=r("span",{class:"text-h6"},"불량명 선택",-1)),e(f,{icon:"",onClick:l[10]||(l[10]=a=>V.value=!1)},{default:t(()=>[e(P,null,{default:t(()=>l[27]||(l[27]=[d("mdi-close")])),_:1})]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(D,{modelValue:x.value,"onUpdate:modelValue":l[11]||(l[11]=a=>x.value=a),label:"검색","append-inner-icon":"mdi-magnify",clearable:"",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),e(s(_),{value:$.value,scrollHeight:"420px",tableStyle:"font-size:0.85rem;"},{default:t(()=>[e(s(i),{field:"BADN_CODE",header:"불량코드"}),e(s(i),{field:"BADN_NAME",header:"불량명"}),e(s(i),{field:"UON",header:"사용여부"}),e(s(i),{header:"선택"},{body:t(a=>[e(f,{size:"small",color:"primary",onClick:u=>Y(a.data)},{default:t(()=>l[29]||(l[29]=[d("선택")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{pl as default};
