import{a as O}from"./index-NIGUFBhG.js";import{d as ae}from"./dayjs.min-CQa8u9th.js";import{s as te,a as o}from"./index-DzeG4XAE.js";import{_ as Te}from"./card-header-btn2k-CzsbA5Hq.js";import{_ as ke}from"./card-header-BG8Zbe1P.js";import{_ as De}from"./card-header-btn3k-6zMLpEnU.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as s,M as H,D as Me,m as we,c as F,o as V,b as e,w as t,Q as X,T as _,U as d,ac as p,a0 as k,d as f,a as i,aq as D,ar as r,N as x,i as Ye,u as n,t as $,al as Re,O as Z,V as j,a2 as h,af as ee,q as ue,F as le,z as se,e as ne,l as oe}from"./index-vUQOwfGq.js";import"./_commonjsHelpers-gnU0ypJ3.js";const Ae={class:"pt-1"},Be={class:"pt-1"},Le={class:"pt-1"},Ee={class:"card"},Fe={key:0,class:"mt-2",style:{color:"#666"}},$e={key:1,class:"mt-2",style:{color:"red"}},Oe={class:"pt-1"},He={class:"pt-1"},je={class:"pt-1"},Ge={__name:"insp",setup(qe){const I=s([]),M=s([]),w=s(null),G=s(!1),q=s(""),N=s(""),S=s(""),y=s("all"),Y=s("all"),R=s(!1),A=s(""),de=H(()=>{const u=(A.value||"").toString().trim().toLowerCase();return u?I.value.filter(l=>[l.INSP_NM,l.INSP_ID,l.INSP_MTHD,l.INSP_TYP,l.UNIT].some(a=>(a||"").toString().toLowerCase().includes(u))):I.value}),B=s(!1),K=s(""),ie=s(["%","℃","℉","g","mg","kg","cm","mm","mL","L","CFU/g"]),v=s(""),P=s(""),C=s(""),g=s(""),L=s(""),c=s(""),U=s("Y"),T=s(""),b=s(""),re=H(()=>!!(P.value&&C.value&&g.value&&c.value&&U.value)),ve=()=>_e(),me=()=>Ie(),E=s(!1),z=s(""),fe=s(["입고","혼합","반죽","성형","발효","급속냉동","포장","출고"]);function pe(){A.value="",R.value=!0}function ce(){R.value=!1,A.value=""}function be(u){N.value=(u==null?void 0:u.INSP_NM)||"",S.value=(u==null?void 0:u.INSP_TYP)||"",y.value=(u==null?void 0:u.INSP_MTHD)||"all",R.value=!1}async function Q(){G.value=!0;try{const{data:u}=await O.get("/api/inspitem");I.value=Array.isArray(u)?u:[],M.value=[...I.value]}catch(u){q.value=(u==null?void 0:u.message)||"조회 실패"}finally{G.value=!1}}const Ve=u=>u.filter(l=>{const a=!N.value||String(l.INSP_NM||"").includes(N.value),m=!S.value||String(l.INSP_TYP)===String(S.value),W=y.value==="all"||String(l.INSP_MTHD)===String(y.value),Ue=Y.value==="all"||String(l.UON)===String(Y.value);return a&&m&&W&&Ue});function _e(){M.value=Ve(I.value)}function Ie(){N.value="",S.value="",y.value="all",Y.value="all",M.value=[...I.value]}function J(){w.value=null,v.value="",P.value="",C.value="",g.value="",L.value="",c.value="",U.value="Y",T.value="",b.value=""}Me(w,u=>{if(!u){J();return}v.value=u.INSP_ID||"",P.value=u.INSP_NM||"",C.value=u.INSP_TYP||"",g.value=u.INSP_MTHD||"",L.value=u.BASI_VAL||"",c.value=u.UNIT||"",U.value=u.UON||"Y",T.value=u.PRCS_FG||"",b.value=u.REMK||""});async function Ne(){var u,l;try{const a={INSP_NM:P.value,INSP_MTHD:g.value,INSP_TYP:C.value,BASI_VAL:L.value,UNIT:c.value,UON:U.value,PRCS_FG:T.value,REMK:b.value};if(v.value)await O.put(`/api/inspitem/${encodeURIComponent(v.value)}`,a);else{const{data:m}=await O.post("/api/inspitem",a);m!=null&&m.INSP_ID&&(v.value=m.INSP_ID)}if(await Q(),v.value){const m=M.value.find(W=>W.INSP_ID===v.value);m&&(w.value=m)}alert("저장되었습니다.")}catch(a){console.error(a),alert("저장 실패: "+(((l=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:l.message)||a.message))}}async function Se(){var u,l;if(v.value&&confirm("해당 검사항목을 삭제하시겠습니까?"))try{await O.delete(`/api/inspitem/${encodeURIComponent(v.value)}`),await Q(),J(),alert("삭제되었습니다.")}catch(a){console.error(a),alert("삭제 실패: "+(((l=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:l.message)||a.message))}}const ye=H(()=>{var l;const u=((l=K.value)==null?void 0:l.toLowerCase())||"";return ie.value.filter(a=>a.toLowerCase().includes(u))});function Pe(u){c.value=u,B.value=!1}const Ce=H(()=>{var l;const u=((l=z.value)==null?void 0:l.toLowerCase())||"";return fe.value.filter(a=>a.toLowerCase().includes(u))});function ge(u){T.value=u,E.value=!1}return we(Q),(u,l)=>(V(),F(le,null,[e(x,{elevation:"10",class:"mb-3"},{default:t(()=>[e(X,{class:"py-6 px-6"},{default:t(()=>[e(Te,{title:"검색 조건","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"warning",onBtnClick1:me,"btn-text2":"조회","btn-variant2":"flat","btn-color2":"primary",onBtnClick2:ve}),e(_,null,{default:t(()=>[e(d,{cols:"12",md:"12"},{default:t(()=>[e(_,{justify:"space-between",dense:""},{default:t(()=>[e(d,{cols:"12",sm:"3"},{default:t(()=>[e(p,{label:"검사명",modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=a=>N.value=a),variant:"outlined",readonly:"",placeholder:"검사명을 선택하세요"},{"append-inner":t(()=>[e(k,{onClick:pe,class:"cursor-pointer"},{default:t(()=>l[25]||(l[25]=[f("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"3"},{default:t(()=>[i("div",Ae,[l[26]||(l[26]=i("div",{class:"mb-2 text-subtitle-2"},"검사유형",-1)),e(D,{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=a=>S.value=a),inline:""},{default:t(()=>[e(r,{label:"CCP",value:"CCP",class:"mr-8"}),e(r,{label:"일반검사",value:"일반검사",class:"mr-6"})]),_:1},8,["modelValue"])])]),_:1}),e(d,{cols:"12",sm:"3"},{default:t(()=>[i("div",Be,[l[27]||(l[27]=i("div",{class:"mb-2 text-subtitle-2"},"검사방식",-1)),e(D,{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=a=>y.value=a),inline:""},{default:t(()=>[e(r,{label:"전체",value:"all",class:"mr-8"}),e(r,{label:"전수검사",value:"전수검사",class:"mr-8"}),e(r,{label:"샘플링검사",value:"샘플링검사",class:"mr-6"})]),_:1},8,["modelValue"])])]),_:1}),e(d,{cols:"12",sm:"3"},{default:t(()=>[i("div",Le,[l[28]||(l[28]=i("div",{class:"mb-2 text-subtitle-2"},"사용여부",-1)),e(D,{modelValue:Y.value,"onUpdate:modelValue":l[3]||(l[3]=a=>Y.value=a),inline:""},{default:t(()=>[e(r,{label:"전체",value:"all",class:"mr-8"}),e(r,{label:"사용",value:"Y",class:"mr-8"}),e(r,{label:"미사용",value:"N",class:"mr-6"})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{elevation:"10",class:"mb-3"},{default:t(()=>[e(X,{class:"py-6 px-6"},{default:t(()=>[e(ke,{title:"검사항목 목록"}),e(_,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[i("div",Ee,[e(n(te),{selection:w.value,"onUpdate:selection":l[4]||(l[4]=a=>w.value=a),value:M.value,selectionMode:"single",metaKeySelection:!1,dataKey:"INSP_ID",paginator:"",rows:10,rowHover:"",tableStyle:"min-width: 60rem",class:"cursor-pointer"},{default:t(()=>[e(n(o),{field:"INSP_ID",header:"검사코드",sortable:""}),e(n(o),{field:"INSP_NM",header:"검사명"}),e(n(o),{field:"INSP_MTHD",header:"검사방식"}),e(n(o),{field:"INSP_TYP",header:"검사유형"}),e(n(o),{field:"BASI_VAL",header:"기준값"}),e(n(o),{field:"UNIT",header:"단위"}),e(n(o),{field:"UON",header:"사용"}),e(n(o),{field:"PRCS_FG",header:"공정구분"}),e(n(o),{field:"REMK",header:"비고"}),e(n(o),{field:"REGIST_DATE",header:"등록일"},{body:t(({data:a})=>[f($(a.REGIST_DATE?n(ae)(a.REGIST_DATE).format("YYYY-MM-DD"):""),1)]),_:1}),e(n(o),{field:"MODI_DATE",header:"수정일"},{body:t(({data:a})=>[f($(a.MODI_DATE?n(ae)(a.MODI_DATE).format("YYYY-MM-DD"):""),1)]),_:1})]),_:1},8,["selection","value"])]),G.value?(V(),F("div",Fe,"불러오는 중…")):q.value?(V(),F("div",$e,"에러: "+$(q.value),1)):Ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{elevation:"10"},{default:t(()=>[e(X,{class:"py-6 px-6"},{default:t(()=>[e(De,{title:"검사항목 관리","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"secondary",onBtnClick1:J,"btn-text2":"삭제","btn-variant2":"flat","btn-color2":"error","btn-disabled2":!v.value,onBtnClick2:Se,"btn-text3":"저장","btn-variant3":"flat","btn-color3":"primary","btn-disabled3":!re.value,onBtnClick3:Ne},null,8,["btn-disabled2","btn-disabled3"]),e(_,null,{default:t(()=>[e(d,{cols:"12",md:"8"},{default:t(()=>[e(_,{justify:"space-between",dense:""},{default:t(()=>[e(d,{cols:"12",sm:"4"},{default:t(()=>[e(p,{label:"검사코드",modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=a=>v.value=a),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"4"},{default:t(()=>[e(p,{label:"검사명",modelValue:P.value,"onUpdate:modelValue":l[6]||(l[6]=a=>P.value=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"4"},{default:t(()=>[i("div",Oe,[l[29]||(l[29]=i("div",{class:"mb-2 text-subtitle-2"},"사용여부",-1)),e(D,{modelValue:U.value,"onUpdate:modelValue":l[7]||(l[7]=a=>U.value=a),inline:""},{default:t(()=>[e(r,{label:"사용",value:"Y",class:"mr-8"}),e(r,{label:"미사용",value:"N"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(_,{justify:"space-between",dense:""},{default:t(()=>[e(d,{cols:"12",sm:"4"},{default:t(()=>[i("div",He,[l[30]||(l[30]=i("div",{class:"mb-2 text-subtitle-2"},"검사유형",-1)),e(D,{modelValue:C.value,"onUpdate:modelValue":l[8]||(l[8]=a=>C.value=a),inline:""},{default:t(()=>[e(r,{label:"CCP",value:"CCP",class:"mr-8"}),e(r,{label:"일반검사",value:"일반검사"})]),_:1},8,["modelValue"])])]),_:1}),e(d,{cols:"12",sm:"4"},{default:t(()=>[i("div",je,[l[31]||(l[31]=i("div",{class:"mb-2 text-subtitle-2"},"검사방식",-1)),e(D,{modelValue:g.value,"onUpdate:modelValue":l[9]||(l[9]=a=>g.value=a),inline:""},{default:t(()=>[e(r,{label:"전수검사",value:"전수검사",class:"mr-8"}),e(r,{label:"샘플링검사",value:"샘플링검사"})]),_:1},8,["modelValue"])])]),_:1}),e(d,{cols:"12",sm:"4"},{default:t(()=>[e(p,{label:"기준값",modelValue:L.value,"onUpdate:modelValue":l[10]||(l[10]=a=>L.value=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{justify:"space-between",dense:""},{default:t(()=>[e(d,{cols:"12",sm:"4"},{default:t(()=>[e(p,{label:"단위",modelValue:c.value,"onUpdate:modelValue":l[12]||(l[12]=a=>c.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[e(k,{onClick:l[11]||(l[11]=a=>B.value=!0),class:"cursor-pointer"},{default:t(()=>l[32]||(l[32]=[f("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"4"},{default:t(()=>[e(p,{label:"공정구분",modelValue:T.value,"onUpdate:modelValue":l[14]||(l[14]=a=>T.value=a),variant:"outlined",readonly:""},{"append-inner":t(()=>[e(k,{onClick:l[13]||(l[13]=a=>E.value=!0),class:"cursor-pointer"},{default:t(()=>l[33]||(l[33]=[f("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"4"},{default:t(()=>[e(p,{label:"비고(간략)",modelValue:b.value,"onUpdate:modelValue":l[15]||(l[15]=a=>b.value=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12",md:"4"},{default:t(()=>[e(Re,{label:"비고",modelValue:b.value,"onUpdate:modelValue":l[16]||(l[16]=a=>b.value=a),outlined:"",rows:"8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,{modelValue:R.value,"onUpdate:modelValue":l[18]||(l[18]=a=>R.value=a),"max-width":"900"},{default:t(()=>[e(x,null,{default:t(()=>[e(Z,{class:"d-flex justify-space-between align-center"},{default:t(()=>[l[35]||(l[35]=i("span",{class:"text-h6"},"검사명 선택",-1)),e(j,{icon:"",onClick:ce},{default:t(()=>[e(k,null,{default:t(()=>l[34]||(l[34]=[f("mdi-close")])),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(p,{modelValue:A.value,"onUpdate:modelValue":l[17]||(l[17]=a=>A.value=a),label:"검색","append-inner-icon":"mdi-magnify",variant:"outlined",clearable:"",class:"mb-4"},null,8,["modelValue"]),e(n(te),{value:de.value,scrollHeight:"420px",tableStyle:"font-size:0.85rem;"},{default:t(()=>[e(n(o),{field:"INSP_ID",header:"검사코드"}),e(n(o),{field:"INSP_NM",header:"검사명"}),e(n(o),{field:"INSP_MTHD",header:"검사방식"}),e(n(o),{field:"INSP_TYP",header:"검사유형"}),e(n(o),{field:"UNIT",header:"단위"}),e(n(o),{header:"선택"},{body:t(({data:a})=>[e(j,{size:"small",color:"primary",onClick:m=>be(a)},{default:t(()=>l[36]||(l[36]=[f("선택")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ee,{modelValue:B.value,"onUpdate:modelValue":l[21]||(l[21]=a=>B.value=a),"max-width":"520"},{default:t(()=>[e(x,null,{default:t(()=>[e(Z,{class:"d-flex justify-space-between align-center"},{default:t(()=>[l[38]||(l[38]=i("span",{class:"text-h6"},"단위 선택",-1)),e(j,{icon:"",onClick:l[19]||(l[19]=a=>B.value=!1)},{default:t(()=>[e(k,null,{default:t(()=>l[37]||(l[37]=[f("mdi-close")])),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(p,{modelValue:K.value,"onUpdate:modelValue":l[20]||(l[20]=a=>K.value=a),label:"검색","append-inner-icon":"mdi-magnify",variant:"outlined",clearable:"",class:"mb-4"},null,8,["modelValue"]),e(ue,{lines:"one"},{default:t(()=>[(V(!0),F(le,null,se(ye.value,a=>(V(),ne(oe,{key:a,onClick:m=>Pe(a)},{default:t(()=>[f($(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ee,{modelValue:E.value,"onUpdate:modelValue":l[24]||(l[24]=a=>E.value=a),"max-width":"520"},{default:t(()=>[e(x,null,{default:t(()=>[e(Z,{class:"d-flex justify-space-between align-center"},{default:t(()=>[l[40]||(l[40]=i("span",{class:"text-h6"},"공정 선택",-1)),e(j,{icon:"",onClick:l[22]||(l[22]=a=>E.value=!1)},{default:t(()=>[e(k,null,{default:t(()=>l[39]||(l[39]=[f("mdi-close")])),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(p,{modelValue:z.value,"onUpdate:modelValue":l[23]||(l[23]=a=>z.value=a),label:"검색","append-inner-icon":"mdi-magnify",variant:"outlined",clearable:"",class:"mb-4"},null,8,["modelValue"]),e(ue,{lines:"one"},{default:t(()=>[(V(!0),F(le,null,se(Ce.value,a=>(V(),ne(oe,{key:a,onClick:m=>ge(a)},{default:t(()=>[f($(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},ll=xe(Ge,[["__scopeId","data-v-b985d8fe"]]);export{ll as default};
