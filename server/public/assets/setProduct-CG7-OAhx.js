import{_ as P}from"./card-header-BG8Zbe1P.js";import{_ as W}from"./card-header-btn3k-6zMLpEnU.js";import{s as K,a as d}from"./index-DzeG4XAE.js";import{_ as S}from"./CommonModal-DAUXa4tk.js";import{a as v}from"./index-NIGUFBhG.js";import{d as O}from"./dayjs.min-CQa8u9th.js";import{_ as j}from"./SnackBar-HH3n22ps.js";import{u as E}from"./useSnackBar-IN_qynCK.js";import{s as G}from"./index-DbeMVECV.js";import{r as s,D as $,c as U,o as g,b as l,w as o,Q as B,U as r,p as Q,ac as u,a0 as x,d as f,as as A,F as D,z as H,u as n,t as T,N as h,a as J,T as L,e as X,h as Z}from"./index-vUQOwfGq.js";import"./_commonjsHelpers-gnU0ypJ3.js";const ee={class:"order"},ve={__name:"setProduct",setup(le){const{snackBar:m}=E(),c=s(!1),p=s(null),y=s(!1),b=s(null),_=s(),V=s(null),i=s(null),k=s(null),C=s(null),w=s(null),I=s(null),M=s(null),R=a=>!a.safe_qty||a.safe_qty===0?0:Math.round(a.bnt/a.safe_qty*100),F=async()=>{try{const a={item_id:p.value},e=await v.get("/api/productList",{params:a});_.value=e.data}catch{m("조회 실패.","error")}};$(V,async a=>{if(!a)i.value=null;else{i.value=a.lot_id;try{const e={lot_id:i.value},t=await v.get("/api/deliveryList",{params:e})}catch{m("조회 실패.","error")}}}),$(_,a=>{a?(i.value=a.lot_id,k.value=a.item_id,C.value=a.crea_date,w.value=a.vald_date,I.value=a.bnt,M.value=a.wh_id):(i.value=null,dataReset())});const q=async()=>{try{return(await v.get("/api/itemModal1")).data}catch{return m("조회 실패.","error"),[]}},z=async()=>{try{return(await v.get("/api/whId")).data}catch{return m("조회 실패.","error"),[]}},N=a=>{p.value=a.item_id},Y=a=>{b.value=a.wh_id};return(a,e)=>(g(),U(D,null,[l(h,{elevation:"10"},{default:o(()=>[l(B,{class:"py-6 px-6"},{default:o(()=>[l(W,{title:"제품관리","btn-text1":"조회","btn-variant1":"flat","btn-color1":"primary",onBtnClick1:e[0]||(e[0]=t=>F()),"btn-text2":"수정","btn-variant2":"flat","btn-color2":"warning",onBtnClick2:e[1]||(e[1]=()=>{}),"btn-text3":"삭제","btn-variant3":"flat","btn-color3":"error",onBtnClick3:e[2]||(e[2]=()=>{})}),l(r,{cols:"12",sm:"4"},{default:o(()=>[l(Q,{class:"pa-2 ma-2"},{default:o(()=>[l(u,{variant:"outlined",label:"제품코드 검색",modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),readonly:""},{"append-inner":o(()=>[l(x,{onClick:e[3]||(e[3]=t=>c.value=!0),class:"cursor-pointer"},{default:o(()=>e[16]||(e[16]=[f("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(A,{modelValue:a.selectProductType,"onUpdate:modelValue":e[5]||(e[5]=t=>a.selectProductType=t),mandatory:"","selected-class":"active"},{default:o(()=>[(g(!0),U(D,null,H(a.productType,t=>(g(),X(Z,{key:t.value,value:t.value,label:"",pill:"",variant:"tonal",size:"small"},{default:o(()=>[f(T(t.key),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(n(K),{value:_.value,tableStyle:"min-width: 50rem",onRowClick:a.onRowClick,class:"cursor-pointer",selection:V.value,"onUpdate:selection":e[6]||(e[6]=t=>V.value=t),selectionMode:"single",metaKeySelection:!1,dataKey:"lot_id"},{default:o(()=>[l(n(d),{field:"lot_id",header:"LOT"}),l(n(d),{field:"item_id",header:"제품 코드"}),l(n(d),{field:"item_name",header:"완제품명"}),l(n(d),{field:"crea_date",header:"입고 일자"},{body:o(({data:t})=>[f(T(n(O)(t.ordr_date).format("YYYY-MM-DD")),1)]),_:1}),l(n(d),{field:"wh_id",header:"창고코드"}),l(n(d),{field:"safe_qty",header:"안전재고량"}),l(n(d),{field:"bnt",header:"현수량"}),l(n(d),{field:"psafe",header:"안전대비 보유율"},{body:o(t=>[l(n(G),{value:R(t.data),showValue:!0,style:{height:"20px"}},null,8,["value"])]),_:1})]),_:1},8,["value","onRowClick","selection"])]),_:1})]),_:1}),l(L,{class:"mt-10"},{default:o(()=>[l(h,{elevation:"10"},{default:o(()=>[l(r,{cols:"12"},{default:o(()=>[J("div",ee,[l(B,{class:"py-6 px-6"},{default:o(()=>[l(P,{title:"완제품관리"})]),_:1}),l(L,{dense:""},{default:o(()=>[l(r,{cols:"12",sm:"6"},{default:o(()=>[l(u,{variant:"outlined",label:"LOT번호",modelValue:i.value,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value=t),readonly:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[l(u,{variant:"outlined",label:"제품코드",modelValue:k.value,"onUpdate:modelValue":e[8]||(e[8]=t=>k.value=t),readonly:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[l(u,{variant:"outlined",modelValue:C.value,"onUpdate:modelValue":e[9]||(e[9]=t=>C.value=t),label:"입고일자",readonly:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[l(u,{variant:"outlined",modelValue:w.value,"onUpdate:modelValue":e[10]||(e[10]=t=>w.value=t),label:"유통기한",readonly:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[l(u,{variant:"outlined",modelValue:I.value,"onUpdate:modelValue":e[11]||(e[11]=t=>I.value=t),label:"현수량",readonly:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[l(u,{variant:"outlined",modelValue:b.value,"onUpdate:modelValue":e[13]||(e[13]=t=>b.value=t),label:"창고코드",density:"compact"},{"append-inner":o(()=>[l(x,{onClick:e[12]||(e[12]=t=>y.value=!0),class:"cursor-pointer"},{default:o(()=>e[17]||(e[17]=[f("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),l(S,{visible:c.value,title:"제품코드",idField:"item_id",columns:[{key:"item_id",label:"제품코드"},{key:"item_type",label:"제품유형"},{key:"item_name",label:"제품명"}],fetchData:q,pageSize:5,onSelect:N,onClose:e[14]||(e[14]=t=>c.value=!1)},null,8,["visible"]),l(S,{visible:y.value,title:"창고번호 검색",idField:"wh_id",columns:[{key:"wh_id",label:"창고번호"},{key:"wh_name",label:"창고이름"},{key:"wh_type",label:"창고유형"},{key:"loca",label:"소재지"}],fetchData:z,pageSize:5,onSelect:Y,onClose:e[15]||(e[15]=t=>y.value=!1)},null,8,["visible"]),l(j)],64))}};export{ve as default};
