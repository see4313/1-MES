import{a as ee}from"./index-NIGUFBhG.js";import{_ as le}from"./card-header-btn2-BNncrG3u.js";import{_ as ae}from"./card-header-btn3k-B0xKRUFF.js";import{s as te,a as s}from"./index-C6cMUqqj.js";import{u as ne}from"./useSnackBar-CsLaRa2S.js";import{r as n,D as oe,c as ue,o as de,b as e,w as a,Q as M,T as r,U as u,ac as d,a0 as m,d as v,N,y as ie,u as i,al as se,F as re}from"./index-BkcQ_3tW.js";const be={__name:"repair",setup(me){const{snackOpen:Q,snackMessage:Y,snackColor:q}=ne();function D(o,l="success"){Y.value=o,q.value=l,Q.value=!0}const I=new Date().toISOString().split("T")[0],T=n(""),H=n(""),w=n(""),R=n(""),B=n(""),K=n(""),$=n(""),L=n(""),S=n(""),O=n(""),j=n([]),F=n(null),f=n(""),p=n(""),y=n(""),V=n(""),c=n(""),b=n(""),z=n(""),_=n(""),C=n(""),k=n(""),g=n("미수리"),U=n(""),x=n(""),E=n(!1),A=n(!1),G=n(!1),J=n(!1),P=n(!1);function W(){T.value="",H.value="",w.value="",R.value="",B.value="",K.value="",$.value="",L.value="",S.value="",O.value=""}function X(){f.value="",p.value="",y.value="",V.value="",c.value="",b.value="",z.value="",_.value="",C.value="",k.value="",g.value="미수리",U.value="",x.value=""}async function Z(){try{const o={facility_id:H.value,facility_type:R.value,fail_type_cd:K.value,emp_id:L.value,urgency_id:O.value},l=await ee.get("/api/repairHist",{params:o});j.value=l.data,l.data.length||D("조회 결과가 없습니다.","warning")}catch(o){console.error("조회 실패",o),D("조회 중 오류가 발생했습니다.","error")}}return oe(F,o=>{o&&(f.value=o.repair_hist_id||"",p.value=o.facility_id||"",y.value=o.facility_name||"",V.value=o.facility_type_name||"",c.value=o.failure_type||"",b.value=o.urgency_name||"",_.value=o.fail_dt||"",C.value=o.repair_dt||"",k.value=o.repair_end_dt||"",g.value=o.oper_yn==="Y"?"가동":"미수리",U.value=o.emp_name||"",x.value=o.remk||"")}),(o,l)=>{const h=ie("CardHeader");return de(),ue(re,null,[e(N,{elevation:"10"},{default:a(()=>[e(M,{class:"py-6 px-6"},{default:a(()=>[e(le,{title:"고장/수리 조회","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"secondary",onBtnClick1:W,"btn-text2":"조회","btn-variant2":"flat","btn-color2":"primary",onBtnClick2:Z}),e(r,null,{default:a(()=>[e(u,{cols:"12",md:"12"},{default:a(()=>[e(r,{justify:"space-between",dense:""},{default:a(()=>[e(u,{cols:"12",sm:"3"},{default:a(()=>[e(d,{label:"설비명",modelValue:T.value,"onUpdate:modelValue":l[1]||(l[1]=t=>T.value=t),variant:"outlined",readonly:""},{"append-inner":a(()=>[e(m,{onClick:l[0]||(l[0]=t=>E.value=!0),class:"cursor-pointer"},{default:a(()=>l[24]||(l[24]=[v("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"3"},{default:a(()=>[e(d,{label:"설비유형",modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=t=>w.value=t),variant:"outlined",readonly:""},{"append-inner":a(()=>[e(m,{onClick:l[2]||(l[2]=t=>A.value=!0),class:"cursor-pointer"},{default:a(()=>l[25]||(l[25]=[v("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"3"},{default:a(()=>[e(d,{label:"고장유형",modelValue:B.value,"onUpdate:modelValue":l[5]||(l[5]=t=>B.value=t),variant:"outlined",readonly:""},{"append-inner":a(()=>[e(m,{onClick:l[4]||(l[4]=t=>G.value=!0),class:"cursor-pointer"},{default:a(()=>l[26]||(l[26]=[v("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"3"},{default:a(()=>[e(d,{label:"담당자",modelValue:$.value,"onUpdate:modelValue":l[7]||(l[7]=t=>$.value=t),variant:"outlined",readonly:""},{"append-inner":a(()=>[e(m,{onClick:l[6]||(l[6]=t=>J.value=!0),class:"cursor-pointer"},{default:a(()=>l[27]||(l[27]=[v("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"3"},{default:a(()=>[e(d,{label:"긴급도",modelValue:S.value,"onUpdate:modelValue":l[9]||(l[9]=t=>S.value=t),variant:"outlined",readonly:""},{"append-inner":a(()=>[e(m,{onClick:l[8]||(l[8]=t=>P.value=!0),class:"cursor-pointer"},{default:a(()=>l[28]||(l[28]=[v("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{elevation:"10",class:"mt-3"},{default:a(()=>[e(M,{class:"py-6 px-6"},{default:a(()=>[e(h,{title:"고장/수리 목록"}),e(i(te),{selection:F.value,"onUpdate:selection":l[10]||(l[10]=t=>F.value=t),value:j.value,selectionMode:"single",metaKeySelection:!1,dataKey:"repair_hist_id",paginator:"",rows:5,tableStyle:"min-width: 50rem",class:"cursor-pointer"},{default:a(()=>[e(i(s),{field:"facility_id",header:"설비ID"}),e(i(s),{field:"facility_nm",header:"설비명"}),e(i(s),{field:"facility_type_name",header:"설비유형"}),e(i(s),{field:"failure_type",header:"고장 유형"}),e(i(s),{field:"urgency_name",header:"긴급도"}),e(i(s),{field:"fail_dt",header:"고장일자"}),e(i(s),{field:"repair_dt",header:"수리일자"}),e(i(s),{field:"repair_end_dt",header:"수리완료일자"}),e(i(s),{field:"emp_name",header:"담당자"}),e(i(s),{field:"oper_yn",header:"설비 상태"}),e(i(s),{field:"remk",header:"비고"})]),_:1},8,["selection","value"])]),_:1})]),_:1}),e(N,{elevation:"10",class:"mt-3"},{default:a(()=>[e(M,{class:"py-6 px-6"},{default:a(()=>[e(ae,{title:"고장/수리 관리","btn-text1":"초기화","btn-variant1":"flat","btn-color1":"secondary",onBtnClick1:X,"btn-text2":"삭제","btn-variant2":"flat","btn-color2":"error","btn-disabled2":!f.value,onBtnClick2:o.itemDelete,"btn-text3":"저장","btn-variant3":"flat","btn-color3":"primary",onBtnClick3:o.itemSave},null,8,["btn-disabled2","onBtnClick2","onBtnClick3"]),e(r,{dense:""},{default:a(()=>[e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"수리이력ID",modelValue:f.value,"onUpdate:modelValue":l[11]||(l[11]=t=>f.value=t),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"설비ID",modelValue:p.value,"onUpdate:modelValue":l[12]||(l[12]=t=>p.value=t),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"설비명",modelValue:y.value,"onUpdate:modelValue":l[14]||(l[14]=t=>y.value=t),variant:"outlined",readonly:""},{"append-inner":a(()=>[e(m,{onClick:l[13]||(l[13]=t=>E.value=!0),class:"cursor-pointer"},{default:a(()=>l[29]||(l[29]=[v("mdi-magnify")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{dense:""},{default:a(()=>[e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"설비유형",modelValue:V.value,"onUpdate:modelValue":l[15]||(l[15]=t=>V.value=t),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"고장유형",modelValue:c.value,"onUpdate:modelValue":l[16]||(l[16]=t=>c.value=t),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"긴급도",modelValue:b.value,"onUpdate:modelValue":l[17]||(l[17]=t=>b.value=t),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{dense:""},{default:a(()=>[e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{type:"date",label:"고장일자",modelValue:_.value,"onUpdate:modelValue":l[18]||(l[18]=t=>_.value=t),max:i(I),variant:"outlined"},null,8,["modelValue","max"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{type:"date",label:"수리일자",modelValue:C.value,"onUpdate:modelValue":l[19]||(l[19]=t=>C.value=t),max:i(I),variant:"outlined"},null,8,["modelValue","max"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{type:"date",label:"수리완료일자",modelValue:k.value,"onUpdate:modelValue":l[20]||(l[20]=t=>k.value=t),max:i(I),variant:"outlined"},null,8,["modelValue","max"])]),_:1})]),_:1}),e(r,{dense:""},{default:a(()=>[e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"담당자",modelValue:U.value,"onUpdate:modelValue":l[21]||(l[21]=t=>U.value=t),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:a(()=>[e(d,{label:"설비 상태",modelValue:g.value,"onUpdate:modelValue":l[22]||(l[22]=t=>g.value=t),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(se,{label:"비고",modelValue:x.value,"onUpdate:modelValue":l[23]||(l[23]=t=>x.value=t),outlined:"",rows:"5"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{be as default};
